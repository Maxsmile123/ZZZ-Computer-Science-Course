# Как сдавать задачи

## Навигация
1) [Работа с репозиторием](#Работа-с-репозиторием)
2) [Что такое CI](#ci)
3) [Как сдать задачу](#Как-создать-PR?-Алгоритм.)

## Работа с репозиторием
Первым делом скачайте себе данный репозиторий локально:
1. Делаем **fork** этого репозитория.
Копия этого репозитория появится в вашем аккаунте - это можно сделать в веб версии, нажав на кнопку
fork в верхней части проекта. 
2. Клонируем `ВАШ` fork себе на компьютер.
Прописать в терминале с установленным git:
```shell
git clone https://github.com/YourGitHubLogin/ZZZ-Computer-Science-Course.git
```
3. Устанавливаем связь с оригинальным репозиторием.
Часто может быть, что репозиторий будет обновляться. Так как вы работаете с копием, необходимо подтягивать изменения из оригинального в копию. Для этого устоновите связь копии и оригинала:
```shell
git remote add upstream https://github.com/Maxsmile123/ZZZ-Computer-Science-Course
```
4. Сборка проекта
Перейдите в скачанный репозиторий и создайте папку `build` в корне репозитория, после чего соберите проект:
```shell
mkdir build
cd build
cmake ..
```
> Процесс может занять продолжительное время, наберитесь терпения.  
5. Сборка задачи

Для того, чтобы собрать вашу задачу, необходимо не покидая папки `build` прописать команду в формате:
```shell
make TASKVAR
```
После чего начнётся сборка, которая первоначально может занять продолжительное время.

Чтобы выполнить компиляцию и запустить тесты к задаче, пропишите:
```shell
./TASKVAR
```
### Example
Допустим, я работаю над задачей geometry, вариант 20. Тогда шаги будут следующими:
```shell
make geometry20
./geometry20
```

Это процедура необходима, чтобы проверить код на успешную компиляцию, отсутствие утечек памяти и UB. Данный процесс будет запускаться в проверках CI, поэтому нет смысла засылать задачу, если локально у вас вылазят ошибки.

## CI

Данный процесс представляет автоматизацию деплоя кода в продакшн. 

В нашем случае это сборка кода под санитайзерами, которые проверяют код на ошибки работы с памятью и наличия UB, запуск форматтера, который проверит код на соответствие код стайлу, а также запуск тестов, если они предусмотрены.

- [Прочтите](./style.md) правила написания кода, которые будут проверяться в CI.

`Pull request(PR)` - это запрос стороннего пользователя на внесение изменений в проект. В нашем случае проект это репозиторий с лабораторными работами.

Перед добавлением вашего кода в общий репозиторий, ваши изменения проходят процедуру `code review`. Это дословно обзор вашего кода, проверка его на состоятельность, логичность и правильную структурность. По ходу ревью можно писать комментарии(issues) к автору изменений.


## Какие решения не будут приняты?
- Код, не прошедший проверки в CI
- Код, написанный не по [код стайлу](style.md)
- Неработающий код 


## Как создать PR? Алгоритм.
### 1. Создаём новую ветку
Под каждую лабу должна быть своя ветка. Название веток на ваш вкус.
Пример создания ветки и переключения на неё:
```shell
git checkout -b NameOfBranch
```
**ВАЖНО**  
Создавайте ветку исключительно от своей главной ветки! Иначе в PR могут добавиться файлы других задач! Перед созданием ветки пропишите эти команды:
```
git checkout main
git fetch upstream
git merge upstream/main
git push origin main
```
### 2. Вносим изменения в код и делаем коммиты изменений

### 3. Выполняем push на ваш удалённый репозиторий
Все ваши коммиты отправляем на удалённый репозиторий командой git push:
```shell
git push
```
### 4. Заходим в веб версию, вкладка Pull Request
Нажимаем на создать, выбираем какую ветку хотим отправить и пишем описание PR: в нём должна
быть указана задача, которую вы выполнили.
### 5. Отправляем PR и ждём проверок c code review
---

Если не нравится консольный git, =(  
То те же действия можно выполнить через кнопки в VS code. Как с ним работать описано [тут](https://code.visualstudio.com/docs/sourcecontrol/overview)